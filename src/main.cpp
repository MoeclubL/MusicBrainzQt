/**
 * @file main.cpp
 * @brief MusicBrainzQt应用程序入口点
 * 
 * 此文件包含应用程序的主函数，负责初始化Qt应用程序环境、
 * 配置应用程序属性、初始化核心系统组件并启动主窗口。
 * 
 * **初始化序列：**
 * 1. 创建QApplication实例
 * 2. 设置应用程序元信息（名称、版本、组织）
 * 3. 初始化日志系统
 * 4. 加载应用程序配置
 * 5. 创建并显示主窗口
 * 6. 启动Qt事件循环
 * 
 * **依赖组件：**
 * - MainWindow: 主窗口界面
 * - Logger: 统一日志系统
 * - ConfigManager: 配置管理器
 * 
 * @author MusicBrainzQt Team
 */

#include <QApplication>
#include "mainwindow.h"
#include "utils/logger.h"
#include "utils/config_manager.h"

/**
 * @brief 应用程序主入口函数
 * @param argc 命令行参数数量
 * @param argv 命令行参数数组
 * @return 应用程序退出代码
 * 
 * 按照Qt应用程序的标准模式，创建应用程序实例、初始化必要的
 * 系统组件、显示主界面并启动事件循环。
 * 
 * **错误处理：**
 * 如果初始化过程中出现错误，应用程序将记录错误并尝试优雅退出。
 * 
 * **返回值：**
 * - 0: 正常退出
 * - 非0: 异常退出（具体错误码由Qt框架确定）
 */
int main(int argc, char *argv[]) {
    // =============================================================================
    // Qt应用程序初始化
    // =============================================================================
    
    QApplication app(argc, argv);
    
    // =============================================================================
    // 应用程序元信息设置
    // =============================================================================
    
    // 设置应用程序基本信息，用于配置文件存储路径、
    // 关于对话框显示和系统集成
    app.setApplicationName("MusicBrainz Qt Client");
    app.setApplicationVersion("1.0");
    app.setOrganizationName("MusicBrainzQt");
    
    // =============================================================================
    // 核心系统初始化
    // =============================================================================
    
    // 初始化统一日志系统
    // 必须在其他组件使用日志功能之前调用
    Logger::initialize();
    
    // 加载应用程序配置
    // 包括用户偏好设置、API配置、窗口状态等
    ConfigManager::instance().load();
    
    // =============================================================================
    // 主界面创建和显示
    // =============================================================================
    
    // 创建主窗口实例
    MainWindow mainWindow;
    
    // 显示主窗口
    mainWindow.show();
    
    // =============================================================================
    // 事件循环启动
    // =============================================================================
    
    // 启动Qt事件循环，处理用户交互、网络请求、定时器等事件
    // 应用程序将在此处运行直到用户退出
    return app.exec();
}